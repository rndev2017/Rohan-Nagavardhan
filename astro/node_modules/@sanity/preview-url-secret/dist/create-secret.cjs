"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@sanity/uuid"),t=require("./_chunks-cjs/constants.cjs");exports.createPreviewSecret=async function(r,a,c,n,i=e.uuid()){const s=r.withConfig({apiVersion:t.a});try{const e=new Date(Date.now()+1e3*t.S),r=`${t.s}.${i}`,o=function(){if(typeof crypto<"u"){const e=new Uint8Array(16);crypto.getRandomValues(e);let t="";for(let r=0;r<e.length;r++)t+=e[r].toString(16).padStart(2,"0");return t=btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),t}return Math.random().toString(36).slice(2)}(),u=s.patch(r).set({secret:o,source:a,studioUrl:c,userId:n});return await s.transaction().createOrReplace({_id:r,_type:t.c}).patch(u).commit({tag:t.t}),{secret:o,expiresAt:e}}finally{await s.delete({query:t.d})}};//# sourceMappingURL=create-secret.cjs.map
