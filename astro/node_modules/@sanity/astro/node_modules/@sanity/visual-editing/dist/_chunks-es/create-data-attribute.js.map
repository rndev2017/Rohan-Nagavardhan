{"version":3,"file":"create-data-attribute.js","sources":["../../../visual-editing-helpers/dist/_chunks-es/transformSanityNodeData.js","../../../visual-editing-helpers/dist/index.js"],"sourcesContent":["import{getPublishedId as t,studioPath as e}from\"@sanity/client/csm\";import{string as r,minLength as o,optional as s,object as n,record as a,unknown as c,is as i,safeParse as u,parse as p}from\"valibot\";function f(t){return\"object\"==typeof t&&null!==t&&!Array.isArray(t)}function l(t){return null!==t&&Array.isArray(t)}function d(t){let e=\"\";for(const r of t)\"string\"!=typeof r?\"number\"!=typeof r?l(r)?(e&&(e+=\":\"),e+=`${r.join(\",\")}}`):r._key&&(e&&(e+=\":\"),e+=`${r._key}`):(e&&(e+=\":\"),e+=`${r}`):(e&&(e+=\".\"),e+=r);return e}const b=/^([A-Za-z]+):([0-9]+)$/,y=/^([A-Za-z]+):([0-9]+),([0-9]+)$/,m=/^([A-Za-z]+):([a-z0-9]+)$/;function h(t){const e=[];for(const r of t.split(\".\")){const t=b.exec(r);if(t){e.push(t[1],Number(t[2]));continue}const o=y.exec(r);if(o){e.push(o[1],[Number(o[2]),Number(o[3])]);continue}const s=m.exec(r);s?e.push(s[1],{_key:s[2]}):e.push(r)}return e}const k=\"drafts.\",j=r([o(1)]),w=s(j),A=n({baseUrl:j,dataset:w,id:j,path:j,projectId:w,tool:w,type:w,workspace:w,isDraft:s(r())}),U=n({origin:j,href:j,data:s(a(r(),c()))});function $(t){return i(A,t)}function g(t){return i(U,t)}function x(r){const{id:o,path:s,baseUrl:n,tool:a,workspace:c,type:i}=r;return $(r)?[[\"id\",t(o)],[\"type\",i],[\"path\",d(e.fromString(s))],[\"base\",encodeURIComponent(n)],[\"workspace\",c],[\"tool\",a],[\"isDraft\",o.startsWith(k)]].filter((([,t])=>!!t)).map((t=>{const[e,r]=t;return!0===r?e:t.join(\"=\")})).join(\";\"):void 0}function z(t){const r=t.split(\";\").reduce(((t,r)=>{const[o,s]=r.split(\"=\");if(!o||r.includes(\"=\")&&!s)return t;switch(o){case\"id\":t.id=s;break;case\"type\":t.type=s;break;case\"path\":t.path=e.toString(h(s));break;case\"base\":t.baseUrl=decodeURIComponent(s);break;case\"tool\":t.tool=s;break;case\"workspace\":t.workspace=s;break;case\"projectId\":t.projectId=s;break;case\"dataset\":t.dataset=s;break;case\"isDraft\":t.isDraft=\"\"}return t}),{});if($(r))return r}function D(t){const e=u(A,t);if(e.success)return e.output;const r=u(U,t);if(r.success)try{const t=new URL(r.output.href,typeof document>\"u\"?\"https://example.com\":location.origin);return t.searchParams.size>0?p(A,Object.fromEntries(t.searchParams.entries())):r.output}catch(t){return console.error(\"Failed to parse sanity node\",t),r.output}}function I(t){if(\"object\"==typeof t&&null!==t)return D(t);try{return D(JSON.parse(t))}catch{return z(t)}}export{k as D,l as a,$ as b,g as c,z as d,x as e,I as f,f as i,d as p,h as u};//# sourceMappingURL=transformSanityNodeData.js.map\n","import{studioPath as t}from\"@sanity/client/csm\";import{e as r}from\"./_chunks-es/transformSanityNodeData.js\";import{p as e,u as n}from\"./_chunks-es/transformSanityNodeData.js\";function o(e){function n(r){return r?\"string\"==typeof r?t.fromString(r):r:[]}function a(e){if(!e.id)throw new Error(\"`id` is required to create a data attribute\");if(!e.type)throw new Error(\"`type` is required to create a data attribute\");if(!e.path||!e.path.length)throw new Error(\"`path` is required to create a data attribute\");const n={baseUrl:e.baseUrl||\"/\",workspace:e.workspace,tool:e.tool,type:e.type,id:e.id,path:\"string\"==typeof e.path?e.path:t.toString(e.path)};return r(n)}const i=t=>a({...e,path:[...n(e.path),...n(t)]});return i.toString=function(){return a(e)},i.combine=function(t){return o({...e,...t})},i.scope=function(t){return o({...e,path:[...n(e.path),...n(t)]})},i}function a(t,r){return`${t}-${\"string\"==typeof r?r:JSON.stringify(r)}`}const i=typeof window<\"u\"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),s={alt:\"altKey\",ctrl:\"ctrlKey\",mod:i?\"metaKey\":\"ctrlKey\",shift:\"shiftKey\"};function p(t,r){return t.every((t=>s[t]?r[s[t]]:r.key===t.toUpperCase()))}function u(t){return t.key===(i?\"Meta\":\"Ctrl\")}function c(t){return\"Alt\"===t.key}export{o as createDataAttribute,a as getQueryCacheKey,c as isAltKey,p as isHotkey,u as isModKey,e as pathToUrlString,n as urlStringToPath};//# sourceMappingURL=index.js.map\n"],"names":["l","t","Array","isArray","d","e","r","join","_key","b","y","m","k","j","o","w","s","A","n","baseUrl","dataset","id","path","projectId","tool","type","workspace","isDraft","U","origin","href","data","a","c","$","i","z","split","reduce","includes","toString","exec","e2","push","Number","h","t3","decodeURIComponent","D","u","success","output","URL","document","location","searchParams","size","p","Object","fromEntries","entries","console","error","I","JSON","parse","fromString","Error","length","encodeURIComponent","startsWith","filter","map","combine","scope","alt","ctrl","mod","window","test","navigator","platform","shift","every","key","toUpperCase"],"mappings":"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"}