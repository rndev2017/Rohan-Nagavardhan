{"version":3,"file":"create-data-attribute.cjs","sources":["../../../visual-editing-helpers/dist/_chunks-es/transformSanityNodeData.js","../../../visual-editing-helpers/dist/index.js"],"sourcesContent":["import{getPublishedId as t,studioPath as e}from\"@sanity/client/csm\";import{string as r,minLength as o,optional as s,object as n,record as a,unknown as c,is as i,safeParse as u,parse as p}from\"valibot\";function f(t){return\"object\"==typeof t&&null!==t&&!Array.isArray(t)}function l(t){return null!==t&&Array.isArray(t)}function d(t){let e=\"\";for(const r of t)\"string\"!=typeof r?\"number\"!=typeof r?l(r)?(e&&(e+=\":\"),e+=`${r.join(\",\")}}`):r._key&&(e&&(e+=\":\"),e+=`${r._key}`):(e&&(e+=\":\"),e+=`${r}`):(e&&(e+=\".\"),e+=r);return e}const b=/^([A-Za-z]+):([0-9]+)$/,y=/^([A-Za-z]+):([0-9]+),([0-9]+)$/,m=/^([A-Za-z]+):([a-z0-9]+)$/;function h(t){const e=[];for(const r of t.split(\".\")){const t=b.exec(r);if(t){e.push(t[1],Number(t[2]));continue}const o=y.exec(r);if(o){e.push(o[1],[Number(o[2]),Number(o[3])]);continue}const s=m.exec(r);s?e.push(s[1],{_key:s[2]}):e.push(r)}return e}const k=\"drafts.\",j=r([o(1)]),w=s(j),A=n({baseUrl:j,dataset:w,id:j,path:j,projectId:w,tool:w,type:w,workspace:w,isDraft:s(r())}),U=n({origin:j,href:j,data:s(a(r(),c()))});function $(t){return i(A,t)}function g(t){return i(U,t)}function x(r){const{id:o,path:s,baseUrl:n,tool:a,workspace:c,type:i}=r;return $(r)?[[\"id\",t(o)],[\"type\",i],[\"path\",d(e.fromString(s))],[\"base\",encodeURIComponent(n)],[\"workspace\",c],[\"tool\",a],[\"isDraft\",o.startsWith(k)]].filter((([,t])=>!!t)).map((t=>{const[e,r]=t;return!0===r?e:t.join(\"=\")})).join(\";\"):void 0}function z(t){const r=t.split(\";\").reduce(((t,r)=>{const[o,s]=r.split(\"=\");if(!o||r.includes(\"=\")&&!s)return t;switch(o){case\"id\":t.id=s;break;case\"type\":t.type=s;break;case\"path\":t.path=e.toString(h(s));break;case\"base\":t.baseUrl=decodeURIComponent(s);break;case\"tool\":t.tool=s;break;case\"workspace\":t.workspace=s;break;case\"projectId\":t.projectId=s;break;case\"dataset\":t.dataset=s;break;case\"isDraft\":t.isDraft=\"\"}return t}),{});if($(r))return r}function D(t){const e=u(A,t);if(e.success)return e.output;const r=u(U,t);if(r.success)try{const t=new URL(r.output.href,typeof document>\"u\"?\"https://example.com\":location.origin);return t.searchParams.size>0?p(A,Object.fromEntries(t.searchParams.entries())):r.output}catch(t){return console.error(\"Failed to parse sanity node\",t),r.output}}function I(t){if(\"object\"==typeof t&&null!==t)return D(t);try{return D(JSON.parse(t))}catch{return z(t)}}export{k as D,l as a,$ as b,g as c,z as d,x as e,I as f,f as i,d as p,h as u};//# sourceMappingURL=transformSanityNodeData.js.map\n","import{studioPath as t}from\"@sanity/client/csm\";import{e as r}from\"./_chunks-es/transformSanityNodeData.js\";import{p as e,u as n}from\"./_chunks-es/transformSanityNodeData.js\";function o(e){function n(r){return r?\"string\"==typeof r?t.fromString(r):r:[]}function a(e){if(!e.id)throw new Error(\"`id` is required to create a data attribute\");if(!e.type)throw new Error(\"`type` is required to create a data attribute\");if(!e.path||!e.path.length)throw new Error(\"`path` is required to create a data attribute\");const n={baseUrl:e.baseUrl||\"/\",workspace:e.workspace,tool:e.tool,type:e.type,id:e.id,path:\"string\"==typeof e.path?e.path:t.toString(e.path)};return r(n)}const i=t=>a({...e,path:[...n(e.path),...n(t)]});return i.toString=function(){return a(e)},i.combine=function(t){return o({...e,...t})},i.scope=function(t){return o({...e,path:[...n(e.path),...n(t)]})},i}function a(t,r){return`${t}-${\"string\"==typeof r?r:JSON.stringify(r)}`}const i=typeof window<\"u\"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),s={alt:\"altKey\",ctrl:\"ctrlKey\",mod:i?\"metaKey\":\"ctrlKey\",shift:\"shiftKey\"};function p(t,r){return t.every((t=>s[t]?r[s[t]]:r.key===t.toUpperCase()))}function u(t){return t.key===(i?\"Meta\":\"Ctrl\")}function c(t){return\"Alt\"===t.key}export{o as createDataAttribute,a as getQueryCacheKey,c as isAltKey,p as isHotkey,u as isModKey,e as pathToUrlString,n as urlStringToPath};//# sourceMappingURL=index.js.map\n"],"names":["l","t","Array","isArray","d","e","r","join","_key","b","y","m","k","j","string","o","w","s","optional","A","n","object","baseUrl","dataset","id","path","projectId","tool","type","workspace","isDraft","U","origin","href","data","a","c","$","i","is","z","split","reduce","includes","studioPath","toString","exec","e2","push","Number","h","t3","decodeURIComponent","D","u","success","output","URL","document","location","searchParams","size","p","Object","fromEntries","entries","console","error","alt","ctrl","mod","window","test","navigator","platform","shift","exports","I","JSON","parse","key","fromString","Error","length","encodeURIComponent","startsWith","filter","map","combine","scope","every","toUpperCase"],"mappings":"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"}