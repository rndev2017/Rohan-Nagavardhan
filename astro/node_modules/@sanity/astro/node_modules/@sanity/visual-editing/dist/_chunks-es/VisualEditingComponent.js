import{useRouter as r}from"next/router.js";import{useRef as e,useState as t,useEffect as n}from"react";import{e as u}from"./enableVisualEditing.js";function s(s){const{refresh:a,zIndex:o}=s,c=r(),p=e(c),[i,l]=t();n((()=>{p.current=c}),[c]),n((()=>{const r=u({zIndex:o,refresh:a,history:{subscribe:r=>(l((()=>r)),()=>l(void 0)),update:r=>{switch(r.type){case"push":return p.current.push(r.url);case"pop":return p.current.back();case"replace":return p.current.replace(r.url);default:throw new Error(`Unknown update type: ${r.type}`)}}}});return()=>r()}),[a,o]);const{asPath:h,basePath:d,locale:f,isReady:m}=r();return n((()=>{if(i&&m){i({type:"push",url:d||f?`${d}${f?`/${f}`:""}${"/"===h?"":h}`:h})}}),[h,d,m,f,i]),null}export{s as default};//# sourceMappingURL=VisualEditingComponent.js.map
