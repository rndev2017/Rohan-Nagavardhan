"use strict";var e=require("@remix-run/react"),t=require("react"),r=require("./enableVisualEditing.cjs");exports.default=function(u){const{refresh:s,zIndex:a}=u,n=e.useNavigate(),c=t.useRef(n),[i,l]=t.useState(),o=e.useRevalidator(),[p,f]=t.useState(null),[h,d]=t.useState(!1);t.useEffect((()=>{c.current=n}),[n]),t.useEffect((()=>{p&&"loading"===o.state?d(!0):p&&h&&"idle"===o.state&&(p(),f(null),d(!1))}),[h,o.state,p]),t.useEffect((()=>{const e=r.e({zIndex:a,refresh:e=>{function t(){return("mutation"!==e.source||!e.livePreviewEnabled)&&new Promise((e=>{o.revalidate(),f((()=>e))}))}return s?s(e,t):t()},history:{subscribe:e=>(l((()=>e)),()=>l(void 0)),update:e=>{"push"===e.type||"replace"===e.type?c.current(e.url,{replace:"replace"===e.type}):"pop"===e.type&&c.current(-1)}}});return()=>e()}),[s,o,a]);const v=e.useLocation();return t.useEffect((()=>{i&&i({type:"push",url:`${v.pathname}${v.search}${v.hash}`})}),[v.hash,v.pathname,v.search,i]),null};//# sourceMappingURL=VisualEditingComponent2.cjs.map
