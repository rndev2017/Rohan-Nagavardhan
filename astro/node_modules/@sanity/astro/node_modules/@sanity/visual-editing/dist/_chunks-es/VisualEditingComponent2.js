import{useNavigate as e,useRevalidator as r,useLocation as t}from"@remix-run/react";import{useRef as n,useState as a,useEffect as s}from"react";import{e as u}from"./enableVisualEditing.js";function i(i){const{refresh:l,zIndex:o}=i,p=e(),c=n(p),[h,m]=a(),d=r(),[f,y]=a(null),[b,v]=a(!1);s((()=>{c.current=p}),[p]),s((()=>{f&&"loading"===d.state?v(!0):f&&b&&"idle"===d.state&&(f(),y(null),v(!1))}),[b,d.state,f]),s((()=>{const e=u({zIndex:o,refresh:e=>{function r(){return("mutation"!==e.source||!e.livePreviewEnabled)&&new Promise((e=>{d.revalidate(),y((()=>e))}))}return l?l(e,r):r()},history:{subscribe:e=>(m((()=>e)),()=>m(void 0)),update:e=>{"push"===e.type||"replace"===e.type?c.current(e.url,{replace:"replace"===e.type}):"pop"===e.type&&c.current(-1)}}});return()=>e()}),[l,d,o]);const x=t();return s((()=>{h&&h({type:"push",url:`${x.pathname}${x.search}${x.hash}`})}),[x.hash,x.pathname,x.search,h]),null}export{i as default};//# sourceMappingURL=VisualEditingComponent2.js.map
